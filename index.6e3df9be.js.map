{"mappings":"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","sources":["src/js/weather-api-service.js","src/js/weather-widget.js","src/js/user-geolocation.js"],"sourcesContent":["const BASE_URL = 'https://api.openweathermap.org/data/2.5/weather?';\n\nconst REQUEST_OPTIONS = {\n  appid: 'dbe190140250d3087dbd292674c0b7da',\n  lat: 51.5085,\n  lon: -0.1257,\n  units: 'metric',\n};\n\nexport async function getCurrentWeather(position) {\n  REQUEST_OPTIONS.lat = position.latitude;\n  REQUEST_OPTIONS.lon = position.longitude;\n\n  const options = new URLSearchParams(REQUEST_OPTIONS);\n  return await fetch(`${BASE_URL}${options}`).then(response => {\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n    return response.json();\n  });\n}\n\nexport async function getDefaultWeather() {\n  const options = new URLSearchParams(REQUEST_OPTIONS);\n  return await fetch(`${BASE_URL}${options}`).then(response => {\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n    return response.json();\n  });\n}\n","const refs = {\n  list: document.querySelector('.list'),\n  listItems: document.querySelectorAll('.item'),\n};\n\nconst mediaList = {\n  mobile: window.matchMedia('(min-width: 320px) and (max-width: 767px)'),\n  tablet: window.matchMedia('(min-width: 768px) and (max-width: 1199px)'),\n  desktop: window.matchMedia('(min-width: 1200px)'),\n};\n\nexport function checkResult(response) {\n  createMarkup(response);\n}\n\nexport function showError(error) {\n  console.log(error);\n}\n\nfunction createMarkup(response) {\n  const formattedDate = {\n    days: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],\n    months: [\n      'Jan',\n      'Feb',\n      'Mar',\n      'Apr',\n      'May',\n      'Jun',\n      'Jul',\n      'Aug',\n      'Sep',\n      'Oct',\n      'Nov',\n      'Dec',\n    ],\n    getFormattedDay(date) {\n      return this.days[date.getDay()];\n    },\n    getFormattedMonth(date) {\n      return this.months[date.getMonth()];\n    },\n  };\n\n  const date = new Date();\n\n  const markup = `<li class=\"item item--weather\"><div class=\"weather__widget\">\n  <div class=\"weather__content\">\n    <div class=\"weather__wrapper\">\n      <span class=\"temperature\">${response.main.temp.toFixed(0)}&#176;</span>\n      <div class=\"weather__wrapper weather__wrapper--column\">\n        <span class=\"description\">${response.weather[0].main}</span>\n        <div class=\"weather__wrapper weather__wrapper--accent\">\n          <svg class=\"location-icon\">\n            <use href=\"./images/icons.svg#icon-location\"></use>\n          </svg>\n          <span class=\"location\">${response.name}</span>\n        </div>\n      </div>\n    </div>\n    <img src=\"https://openweathermap.org/img/wn/${\n      response.weather[0].icon\n    }@2x.png\" alt=\"${response.weather[0].main}\" class=\"weather-icon\">\n    <div class=\"date\">${formattedDate.getFormattedDay(date)}\n      <br />\n      ${date.getDate()} ${formattedDate.getFormattedMonth(\n    date\n  )} ${date.getFullYear()}\n    </div>\n  </div>\n</div>\n</li>`;\n\n  showWeather(markup);\n}\n\nfunction showWeather(markup) {\n  if (mediaList.mobile.matches) {\n    checkScreenSize(markup);\n    return refs.listItems[0].insertAdjacentHTML('beforebegin', markup);\n  }\n  if (mediaList.tablet.matches) {\n    checkScreenSize(markup);\n    return refs.listItems[1].insertAdjacentHTML('beforebegin', markup);\n  }\n  if (mediaList.desktop.matches) {\n    checkScreenSize(markup);\n    return refs.listItems[4].insertAdjacentHTML('beforebegin', markup);\n  } else {\n    console.log('!!!');\n  }\n}\n\nfunction checkScreenSize(markup) {\n  mediaList.mobile.addEventListener('change', show);\n  mediaList.tablet.addEventListener('change', show);\n  mediaList.desktop.addEventListener('change', show);\n\n  function show() {\n    if (mediaList.mobile.matches) {\n      console.log('its mobile');\n      document.querySelector('.item--weather').remove();\n      return refs.listItems[0].insertAdjacentHTML('beforebegin', markup);\n    }\n    if (mediaList.tablet.matches) {\n      console.log('its tablet');\n      document.querySelector('.item--weather').remove();\n      return refs.listItems[1].insertAdjacentHTML('beforebegin', markup);\n    }\n    if (mediaList.desktop.matches) {\n      console.log('its desktop');\n      document.querySelector('.item--weather').remove();\n      return refs.listItems[4].insertAdjacentHTML('beforebegin', markup);\n    }\n  }\n}\n","import { getCurrentWeather } from './weather-api-service';\nimport { getDefaultWeather } from './weather-api-service';\nimport { checkResult } from './weather-widget';\nimport { showError } from './weather-widget';\n\naddEventListener('DOMContentLoaded', getUserLocation);\n\nexport function getUserLocation() {\n  return navigator.geolocation.getCurrentPosition(\n    positionHandler,\n    positionError\n  );\n}\n\nfunction positionHandler(position) {\n  getCurrentWeather(position.coords).then(checkResult).catch(showError);\n}\n\nfunction positionError(error) {\n  console.log(error);\n  getDefaultWeather().then(checkResult).catch(showError);\n}\n"],"names":["$49281123daaa4022$var$REQUEST_OPTIONS","appid","lat","lon","units","async","$49281123daaa4022$export$a7a8d53ca6ad3a0","position","latitude","longitude","options","URLSearchParams","fetch","then","response","ok","Error","status","json","$49281123daaa4022$export$d3361cdbb6020067","$d9eced24bb27ea1f$var$refs","list","document","querySelector","listItems","querySelectorAll","$d9eced24bb27ea1f$var$mediaList","mobile","window","matchMedia","tablet","desktop","$d9eced24bb27ea1f$export$778e9fcff4a6507d","formattedDate","days","months","getFormattedDay","date","this","getDay","getFormattedMonth","getMonth","date1","Date","markup","matches","$d9eced24bb27ea1f$var$checkScreenSize","insertAdjacentHTML","console","log","$d9eced24bb27ea1f$var$showWeather","main","temp","toFixed","weather","name","icon","getDate","getFullYear","$d9eced24bb27ea1f$var$createMarkup","$d9eced24bb27ea1f$export$3879b24e8245693d","error","show","remove","addEventListener","$e357e0c6b59d5260$var$positionHandler","coords","catch","$e357e0c6b59d5260$var$positionError","navigator","geolocation","getCurrentPosition"],"version":3,"file":"index.6e3df9be.js.map"}